# 키움증권 API 데이터 사전 (Data Dictionary)

> 원하는 데이터를 자유롭게 꺼낼 수 있는 API 카탈로그. 내부 참조용.

---

## 계좌 및 잔고

| API ID | 설명 | 주요 반환 필드 |
|:---|:---|:---|
| `ka00001` | 계좌번호 조회 | `acctNo` |
| `kt00001` | 예수금 상세 | `entr`, `ord_alow_amt`, `ch_uncla` |
| `kt00005` | 체결잔고(포트폴리오) | `evlt_amt_tot`, `tot_pl_rt`, `stk_cntr_remn[]` |
| `kt00018` | 계좌평가잔고 내역 | 기간별 수익률 추적 |

## 주문

| API ID | 설명 | 핵심 파라미터 |
|:---|:---|:---|
| `kt10000` | 매수 주문 | `stk_cd`, `ord_qty`, `ord_uv`, `trde_tp` |
| `kt10001` | 매도 주문 | 동일 |
| `kt10002` | 주문 정정 | `orig_ord_no`, `ord_uv` |
| `kt10003` | 주문 취소 | `orig_ord_no`, `cncl_qty` (0=잔량전체) |
| `ka10075` | 미체결 조회 | `oso[]` → `ord_stt`, `oso_qty`, `cur_prc` |

## 시장 데이터 (차트/호가)

| API ID | 설명 | 비고 |
|:---|:---|:---|
| `ka10001` | 주식 기본정보 | 상한가, 액면가, 상장주식수 |
| `ka10004` | 호가창 스냅샷 | 매수/매도 잔량 불균형 |
| `ka10079` | 틱 차트 | 초단기 분석 |
| `ka10080` | 분봉 차트 | `upd_stkpc_tp=1` (수정주가) 필수 |
| `ka10081` | 일봉 차트 | 기술적 지표 계산 기반 |
| `ka10082` | 주봉 차트 | 중기 트렌드 |
| `ka10083` | 월봉 차트 | 장기 트렌드 |

## 수급 및 테마

| API ID | 설명 | 활용 |
|:---|:---|:---|
| `ka10008` | 외국인 종목별 매매동향 | 거대 자본 유입/유출 |
| `ka90009` | 외국인/기관 매매 상위 | 핫 종목 식별 |
| `ka90001` | 테마 그룹 | 주도 테마 식별 |
| `ka90002` | 테마 구성 종목 | 섹터 로테이션 전략 |
| `ka90003` | 프로그램 순매수 상위 50 | 기관 알고리즘 추적 |

## WebSocket 실시간 스트림

| Stream ID | 설명 | 핵심 FID |
|:---|:---|:---|
| `00` | 주문체결 알림 | 9203(주문번호), 913(상태), 919(거부사유) |
| `0B` | 주식체결 틱 | 15(체결수량, 부호로 수급방향), 228(체결강도) |
| `0D` | 호가잔량 Level 2 | 41~50(매도호가), 51~60(매수호가), 121(총매도잔량) |
| `0J` | 업종지수 | 거시적 시장 충격 감지 |
| `1h` | VI 발동/해제 | 변동성 완화장치 대응 |

## 매매 조건 코드 (trde_tp)

| 코드 | 설명 | AI 사용 시점 |
|:---|:---|:---|
| `00` | 지정가 | 기본값, 목표가 매매 |
| `03` | 시장가 | 급등 추격 시 (슬리피지 주의) |
| `06` | 최유리지정가 | 최우선 호가 빠른 체결 |
| `20` | FOK 지정가 | 전량 미체결 시 자동 취소 |
| `13` | IOC 시장가 | 가능한 수량만 즉시 체결 |

## 오류 코드 빠른 참조

| 코드 | 원인 | 대응 |
|:---|:---|:---|
| `1700` | Rate Limit 초과 | 지수 백오프(Exponential Backoff) |
| `8005` | 토큰 만료 | 자동 재발급 후 재시작 |
| `8010` | IP 불일치 | 고정 IP 확인 |
| `8030/8031` | 모의/실전 키 교차 | `.env` KIWOOM_ENV 확인 |
